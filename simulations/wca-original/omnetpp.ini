[General]
network = WcaNetwork
sim-time-limit = 200s

# Visualization
*.visualizer.*.mobilityVisualizer.displayMovements = true
*.visualizer.*.mobilityVisualizer.displayVelocities = true
*.visualizer.*.mobilityVisualizer.displayOrientations = true

# Number of nodes (pure ad-hoc network server or AP doesnt exist here)
*.numHosts = 10

# Configurator
*.configurator.addStaticRoutes = false
*.configurator.addDefaultRoutes = false
*.configurator.addDirectRoutes = false
*.configurator.addSubnetRoutes = false
*.configurator.assignDisjunctSubnetAddresses = false
*.configurator.config = xml("<config> \
    <interface hosts='host[*]' names='wlan0' address='10.0.0.x' netmask='255.255.255.0'/> \
</config>")

# Radio Medium
*.radioMedium.typename = "Ieee80211ScalarRadioMedium"
*.radioMedium.pathLossType = "TwoRayGroundReflection"

# Ad-hoc Host Configuration
*.host[*].typename = "AdhocHost"
*.host[*].numApps = 1
*.host[*].hasStatus = true

# Wireless Interface
*.host[*].wlan[0].typename = "Ieee80211Interface"
*.host[*].wlan[0].radio.typename = "Ieee80211ScalarRadio"
*.host[*].wlan[0].radio.transmitter.power = 20mW
*.host[*].wlan[0].radio.receiver.sensitivity = -85dBm
*.host[*].wlan[0].radio.receiver.energyDetection = -85dBm
*.host[*].wlan[0].radio.receiver.snirThreshold = 4dB

# MAC Settings
*.host[*].wlan[0].mac.typename = "Ieee80211Mac"
*.host[*].wlan[0].mac.dcf.channelAccess.cwMin = 15
*.host[*].wlan[0].mac.dcf.channelAccess.cwMax = 1023

# Mobility
*.host[*].mobility.typename = "RandomWaypointMobility"
*.host[*].mobility.initFromDisplayString = false
*.host[*].mobility.constraintAreaMinX = 0m
*.host[*].mobility.constraintAreaMinY = 0m
*.host[*].mobility.constraintAreaMinZ = 0m
*.host[*].mobility.constraintAreaMaxX = 1000m
*.host[*].mobility.constraintAreaMaxY = 800m
*.host[*].mobility.constraintAreaMaxZ = 0m
*.host[*].mobility.initialX = uniform(100m, 900m)
*.host[*].mobility.initialY = uniform(100m, 700m)
*.host[*].mobility.initialZ = 0m
*.host[*].mobility.speed = uniform(5mps, 15mps)
*.host[*].mobility.waitTime = uniform(3s, 10s)

# WCA Protocol Configuration
*.host[*].ipv4.routingTable.netmaskRoutes = ""
*.host[*].routing.typename = "hwca.wca.Wca"
*.host[*].routing.helloInterval = 2s
*.host[*].routing.clusterTimeout = 6s
*.host[*].routing.maxTransmissionPower = 100mW
*.host[*].routing.radioRange = 250m

# WCA weight factors (should sum to 1.0)
*.host[*].routing.degreeWeight = 0.25
*.host[*].routing.transmissionWeight = 0.25
*.host[*].routing.mobilityWeight = 0.25
*.host[*].routing.batteryWeight = 0.25

# Energy model
*.host[*].energyStorage.typename = "SimpleEpEnergyStorage"
*.host[*].energyStorage.nominalCapacity = 50000J
*.host[*].energyStorage.initialCapacity = uniform(30000J, 50000J)
*.host[*].wlan[0].radio.energyConsumer.typename = "StateBasedEpEnergyConsumer"

# UDP Application for inter-node communication testing
*.host[*].app[0].typename = "UdpBasicApp"
*.host[*].app[0].destAddresses = "host[0]"  # Example: all nodes send to host[0] todo retrieve the hwca updates into original wca study
*.host[*].app[0].destPort = 5000
*.host[*].app[0].messageLength = 512B
*.host[*].app[0].sendInterval = exponential(2s)
*.host[*].app[0].startTime = uniform(20s, 30s)
*.host[*].app[0].stopTime = 190s

# UDP Sink to receive packets
*.host[0].numApps = 2
*.host[0].app[1].typename = "UdpSink"
*.host[0].app[1].localPort = 5000

# Statistics Recording
**.scalar-recording = true
**.vector-recording = false

# WCA Clustering Statistics
**.routing.clusterHeadChanged.result-recording-modes = +vector,+stats

# Energy Statistics
**.energyStorage.residualCapacity.result-recording-modes = +vector,+stats

# Application Statistics - Count and timing only
**.app[*].sentPk:count.result-recording-modes = +last,+vector
**.app[*].rcvdPk:count.result-recording-modes = +last,+vector
**.app[*].endToEndDelay:histogram.result-recording-modes = +histogram
**.app[*].endToEndDelay:stats.result-recording-modes = +stats
**.app[*].endToEndDelay:vector.result-recording-modes = +vector

# Radio Statistics
**.wlan[*].radio.minSnir.result-recording-modes = +vector,+stats
**.wlan[*].radio.packetErrorRate.result-recording-modes = +stats
**.wlan[*].radio.bitErrorRate.result-recording-modes = +stats

# Disable all packet object signals (these cause the error keep them for now)
**.packetSentToPeer.result-recording-modes = -
**.packetReceivedFromPeer.result-recording-modes = -
**.packetSent.result-recording-modes = -
**.packetReceived.result-recording-modes = -
**.packetDrop.result-recording-modes = -
**.packetPushed.result-recording-modes = -
**.packetPopped.result-recording-modes = -
**.packetRemoved.result-recording-modes = -
**.packetCreated.result-recording-modes = -
**.wlan[*].mac.dcf.**.result-recording-modes = -
**.mac.dcf.**.result-recording-modes = -

# Experiment Configurations for the original study

# Configuration for testing different node densities
[Config LowDensity]
*.numHosts = 5
*.host[*].mobility.speed = uniform(2mps, 8mps)

[Config MediumDensity]
*.numHosts = 10
*.host[*].mobility.speed = uniform(5mps, 15mps)

[Config HighDensity]
*.numHosts = 20
*.host[*].mobility.speed = uniform(5mps, 15mps)

# Configuration for testing different mobility patterns
[Config HighMobility]
*.host[*].mobility.speed = uniform(15mps, 25mps)
*.host[*].mobility.waitTime = uniform(0s, 2s)
*.host[*].routing.helloInterval = 1s
*.host[*].routing.clusterTimeout = 3s

[Config LowMobility]
*.host[*].mobility.speed = uniform(1mps, 5mps)
*.host[*].mobility.waitTime = uniform(10s, 20s)
*.host[*].routing.helloInterval = 3s
*.host[*].routing.clusterTimeout = 9s

# Configuration for testing different weight factors
[Config DegreeOptimized]
*.host[*].routing.degreeWeight = 0.7
*.host[*].routing.transmissionWeight = 0.1
*.host[*].routing.mobilityWeight = 0.1
*.host[*].routing.batteryWeight = 0.1

[Config MobilityOptimized]
*.host[*].routing.degreeWeight = 0.1
*.host[*].routing.transmissionWeight = 0.1
*.host[*].routing.mobilityWeight = 0.7
*.host[*].routing.batteryWeight = 0.1

[Config BatteryOptimized]
*.host[*].routing.degreeWeight = 0.1
*.host[*].routing.transmissionWeight = 0.1
*.host[*].routing.mobilityWeight = 0.1
*.host[*].routing.batteryWeight = 0.7

# Configuration for stationary network, debugging for cluster formation
[Config StationaryNetwork]
*.host[*].mobility.typename = "StationaryMobility"
*.host[*].mobility.initialX = uniform(100m, 900m)
*.host[*].mobility.initialY = uniform(100m, 700m)
*.host[*].routing.helloInterval = 2s
*.host[*].routing.clusterTimeout = 6s