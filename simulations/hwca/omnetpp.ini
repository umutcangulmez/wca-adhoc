[General]
network = WcaNetwork
sim-time-limit = 200s

# Visualization
*.visualizer.*.mobilityVisualizer.displayMovements = true
*.visualizer.*.mobilityVisualizer.displayVelocities = true
*.visualizer.*.mobilityVisualizer.displayOrientations = false

*.numHosts = 10
# Static two APs at coordinates (100,400) and (500,400)
**.host[*].wca.apPositions = "100,400;500,400"

# Configurator - No static routes (WCA handles routing)
*.configurator.addStaticRoutes = false
*.configurator.addDefaultRoutes = false
*.configurator.addDirectRoutes = false
*.configurator.addSubnetRoutes = false
*.configurator.config = xml("<config> \
    <interface hosts='host[*]' names='wlan0' address='10.0.0.x' netmask='255.255.255.0'/> \
    <interface hosts='server' names='wlan0' address='10.0.0.100' netmask='255.255.255.0'/> \
</config>")


# Server configuration
*.server.hwcaServer.broadcastInterval = 10s
*.server.hwcaServer.robotTimeoutThreshold = 15s
*.server.hwcaServer.expectedRobotCount = 10

# Server position
*.server.mobility.typename = "StationaryMobility"
*.server.mobility.initialX = 100m
*.server.mobility.initialY = 400m

# Server Wireless Interface
*.server.wlan[0].typename = "Ieee80211Interface"
*.server.wlan[0].radio.typename = "Ieee80211ScalarRadio"
*.server.wlan[0].radio.transmitter.power = 20mW
*.server.wlan[0].radio.receiver.sensitivity = -85dBm
*.server.wlan[0].mac.typename = "Ieee80211Mac"
*.server.wlan[0].mgmt.typename = "Ieee80211MgmtAdhoc"
*.server.wlan[0].agent.typename = ""

# Robots send to server
**.host[*].wca.serverAddress = "10.0.0.100"

# Radio Medium
*.radioMedium.typename = "Ieee80211ScalarRadioMedium"

# Host Configuration - Use WcaHost
*.host[*].typename = "hwca.WcaHost"
*.host[*].hasStatus = true
*.host[*].numApps = 1

# Wireless Interface
*.host[*].wlan[0].typename = "Ieee80211Interface"
*.host[*].wlan[0].radio.typename = "Ieee80211ScalarRadio"
*.host[*].wlan[0].radio.transmitter.power = 20mW
*.host[*].wlan[0].radio.receiver.sensitivity = -85dBm

# MAC Settings
*.host[*].wlan[0].mac.typename = "Ieee80211Mac"

# Mobility
*.host[*].mobility.typename = "RandomWaypointMobility"
*.host[*].mobility.initFromDisplayString = false
*.host[*].mobility.constraintAreaMinX = 0m
*.host[*].mobility.constraintAreaMinY = 0m
*.host[*].mobility.constraintAreaMinZ = 0m
*.host[*].mobility.constraintAreaMaxX = 1000m
*.host[*].mobility.constraintAreaMaxY = 800m
*.host[*].mobility.constraintAreaMaxZ = 0m
*.host[*].mobility.initialX = uniform(100m, 900m)
*.host[*].mobility.initialY = uniform(100m, 700m)
*.host[*].mobility.initialZ = 0m
*.host[*].mobility.speed = uniform(5mps, 15mps)
*.host[*].mobility.waitTime = uniform(3s, 10s)

# WCA Protocol Configuration
*.host[*].wca.helloInterval = 2s
*.host[*].wca.clusterTimeout = 6s
*.host[*].wca.maxTransmissionPower = 100mW
*.host[*].wca.radioRange = 250m

# Data Traffic Generation
*.host[*].wca.dataTrafficInterval = 5s   # Send UDP packet every 5 seconds
*.host[*].wca.numNodes = 10              # Must match numHosts

# WCA weight factors (from original paper, should sum to 1.0)
# w1: degree difference, w2: sum of distances, w3: mobility, w4: cumulative CH time
*.host[*].wca.degreeWeight = 0.25
*.host[*].wca.distanceWeight = 0.25
*.host[*].wca.mobilityWeight = 0.25
*.host[*].wca.clusterHeadTimeWeight = 0.25
*.host[*].wca.idealDegree = 5

# Energy model
*.host[*].energyStorage.typename = "IdealEpEnergyStorage"

# Configure the radio's energy consumer
*.host[*].wlan[0].radio.energyConsumer.typename = "StateBasedEpEnergyConsumer"

# Energy consumption rates (Watts for each state)
*.host[*].wlan[0].radio.energyConsumer.offPowerConsumption = 0mW
*.host[*].wlan[0].radio.energyConsumer.sleepPowerConsumption = 1mW
*.host[*].wlan[0].radio.energyConsumer.switchingPowerConsumption = 5mW
*.host[*].wlan[0].radio.energyConsumer.receiverIdlePowerConsumption = 2mW
*.host[*].wlan[0].radio.energyConsumer.receiverBusyPowerConsumption = 5mW
*.host[*].wlan[0].radio.energyConsumer.receiverReceivingPowerConsumption = 10mW
*.host[*].wlan[0].radio.energyConsumer.transmitterIdlePowerConsumption = 2mW
*.host[*].wlan[0].radio.energyConsumer.transmitterTransmittingPowerConsumption = 100mW

# UDP Application for testing
*.host[*].app[0].typename = "UdpBasicApp"
*.host[*].app[0].destAddresses = "host[0]"  # Example: all nodes send to host[0] todo retrieve the hwca updates into original wca study
*.host[*].app[0].destPort = 5000
*.host[*].app[0].messageLength = 512B
*.host[*].app[0].sendInterval = exponential(2s)
*.host[*].app[0].startTime = uniform(20s, 30s)
*.host[*].app[0].stopTime = 190s

# UDP Sink to receive packets
*.host[0].numApps = 2
*.host[0].app[1].typename = "UdpSink"
*.host[0].app[1].localPort = 5000

# Statistics Recording
**.scalar-recording = true
**.vector-recording = true

# WCA Statistics
**.wca.clusterHeadChanged.result-recording-modes = +vector,+count
**.wca.nodeWeight.result-recording-modes = +vector,+stats
**.wca.neighborCount.result-recording-modes = +vector,+stats



# Experiment Configurations
[Config LowDensity]
*.numHosts = 5
*.host[*].mobility.speed = uniform(2mps, 8mps)

[Config MediumDensity]
*.numHosts = 10
*.host[*].mobility.speed = uniform(5mps, 15mps)

[Config HighDensity]
*.numHosts = 20
*.host[*].mobility.speed = uniform(5mps, 15mps)

[Config HighMobility]
*.host[*].mobility.speed = uniform(15mps, 25mps)
*.host[*].mobility.waitTime = uniform(0s, 2s)
*.host[*].wca.helloInterval = 1s
*.host[*].wca.clusterTimeout = 3s

[Config LowMobility]
*.host[*].mobility.speed = uniform(1mps, 5mps)
*.host[*].mobility.waitTime = uniform(10s, 20s)
*.host[*].wca.helloInterval = 3s
*.host[*].wca.clusterTimeout = 9s

[Config DegreeOptimized]
*.host[*].wca.degreeWeight = 0.7
*.host[*].wca.transmissionWeight = 0.1
*.host[*].wca.mobilityWeight = 0.1
*.host[*].wca.batteryWeight = 0.1

[Config MobilityOptimized]
*.host[*].wca.degreeWeight = 0.1
*.host[*].wca.transmissionWeight = 0.1
*.host[*].wca.mobilityWeight = 0.7
*.host[*].wca.batteryWeight = 0.1

[Config BatteryOptimized]
*.host[*].wca.degreeWeight = 0.1
*.host[*].wca.transmissionWeight = 0.1
*.host[*].wca.mobilityWeight = 0.1
*.host[*].wca.batteryWeight = 0.7

[Config StationaryNetwork]
*.host[*].mobility.typename = "StationaryMobility"
*.host[*].mobility.initialX = uniform(100m, 900m)
*.host[*].mobility.initialY = uniform(100m, 700m)